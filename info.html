<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>TRUMAIMBOT.XYZ</title>
  <link rel="icon" type="image/png" sizes="32x32" href="https://i.imgur.com/OutXhHO.jpeg">

<!-- Cấu hình hiển thị cho Windows -->
<meta name="msapplication-TileColor" content="#000">
<meta name="theme-color" content="#000">
<!-- CSS -->
  <link rel="stylesheet" href="style.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
  
  <!-- Firebase JS (compat) -->
  <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-database-compat.js"></script>
  
  <!-- Firebase Config -->
  <script src="firebase-config.js"></script>
  <!-- Main Script -->
  <script src="script.js" defer></script>
<style>
/* RESET & GLOBAL */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}
/* Đặt màu nền xám cho toàn bộ trang */
    html, body {
      margin: 0;
      padding: 0;
      background-color: #444444; /* Màu xám */
      min-height: 100vh;      /* Để luôn chiếm đủ chiều cao màn hình */
    }
body {
  background: linear-gradient(135deg, #444444, #444444);
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  color: #fff;
  line-height: 1.6;
}

/* HEADER */
.header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: rgba(0, 0, 0, 0.7);
  padding: 10px 20px;
  position: sticky;
  top: 0;
  z-index: 1000;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
}
.logo {
  display: flex;
  align-items: center;
}
.logo img {
  width: 45px;
  height: 45px;
  border-radius: 50%;
  margin-right: 10px;
  border: 2px solid #fff;
}
.site-title {
  font-size: 1.5rem;
  font-weight: 700;
}
.user-menu {
  display: flex;
  align-items: center;
}
.btn-auth {
  background: #ff9800;
  border: none;
  padding: 8px 14px;
  margin-left: 10px;
  cursor: pointer;
  border-radius: 4px;
  font-weight: 600;
  transition: background 0.3s;
}
.btn-auth:hover {
  background: #e68900;
}
.logged-in-menu {
  display: flex;
  align-items: center;
  position: relative;
}
.logged-in-menu span {
  margin-right: 10px;
  font-weight: 600;
}
.balance-label {
  background: rgba(0, 0, 0, 0.4);
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 0.9rem;
  margin-right: 10px;
}
.btn-logout-direct {
  background: #e53935;
  border: none;
  padding: 8px 12px;
  cursor: pointer;
  border-radius: 4px;
  font-weight: 600;
  transition: background 0.3s;
}
.btn-logout-direct:hover {
  background: #d32f2f;
}
.arrow-icon {
  width: 20px;
  height: 20px;
  cursor: pointer;
}
.dropdown-menu {
  position: absolute;
  top: 35px;       /* Điều chỉnh cho phù hợp với vị trí header của bạn */
  right: 0;
  background: #333;    /* Màu nền dropdown */
  color: #fff;         /* Màu chữ mặc định */
  border-radius: 4px;
  min-width: 160px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.3);
  overflow: hidden;
  z-index: 100;
}

.dropdown-menu a {
  display: block;
  padding: 8px 12px;
  text-decoration: none;
  color: #fff;         /* Màu chữ của link */
  background: #333;    /* Nền cho mỗi mục link (trùng với màu dropdown) */
  transition: background 0.3s;
}

/* Hiệu ứng hover */
.dropdown-menu a:hover {
  background: #444;    /* Thay đổi màu nền khi hover */
}

/* HAMBURGER & SIDEBAR */
.hamburger {
  display: flex;
  flex-direction: column;
  justify-content: space-around;
  width: 26px;
  height: 26px;
  cursor: pointer;
}
.hamburger .bar {
  height: 3px;
  background: #fff;
  border-radius: 2px;
}
.sidebar {
  position: fixed;
  top: 0;
  left: 0;
  width: 240px;
  height: 100%;
  background: rgba(0, 0, 0, 0.85);
  padding: 20px;
  transform: translateX(-100%);
  transition: transform 0.3s ease-in-out;
  z-index: 1100;
}
.sidebar:not(.hidden) {
  transform: translateX(0);
}
.sidebar-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}
.sidebar-header h3 {
  font-size: 1.3rem;
  font-weight: 600;
}
.btn-close-sidebar {
  background: transparent;
  border: none;
  color: #fff;
  font-size: 1.2rem;
  cursor: pointer;
}
.sidebar ul {
  list-style: none;
}
.sidebar ul li {
  margin-bottom: 12px;
}
.sidebar ul li button {
  background: none;    /* Không nền */
  border: none;        /* Không viền */
  color: #fff;         /* Màu chữ trắng */
  padding: 10px;       /* Khoảng cách nội dung */
  font-size: 1rem;     /* Kích cỡ chữ */
  cursor: pointer;     /* Con trỏ chuột */
  box-shadow: none;    /* Không đổ bóng */
  outline: none;       /* Bỏ outline khi focus */
  transition: color 0.3s, text-decoration 0.3s;
}

.sidebar ul li button:hover {
  text-decoration: underline;  /* Hiệu ứng gạch chân khi hover */
  color: #ffcc00;              /* Màu chữ thay đổi khi hover */
  background: none;            /* Giữ nguyên không nền */
}

/* BANNER */
.welcome-banner {
  /* Sử dụng hình ảnh nền, thay URL bằng đường dẫn hình ảnh bạn muốn */
  background: url('https://cdn-media.sforum.vn/storage/app/media/thanhhuyen/%E1%BA%A3nh%20%C4%91%E1%BB%99ng%20anime/3/anh-dong-anime-14.gif') no-repeat center center/cover;
  padding: 40px 35px;
  text-align: center;
  border-radius: 0px;
  margin: 3px;
  box-shadow: 0 4px 8px rgba(0,0,0,0.3);
}

.welcome-banner h2 {
  margin-bottom: 5px;
  font-size: 1rem;
}

.welcome-banner p {
  font-size: 1.1rem;
  margin-bottom: 8px;
}

.welcome-banner a {
  color: #ff9800;
  text-decoration: underline;
  font-weight: 600;
}

/* DANH MỤC SẢN PHẨM */
.category-section {
  background: rgba(0, 0, 0, 0.5);
  padding: 4px;
  margin: 4px;
  border-radius: 0px;
}
.category-section h2 {
  font-size: 1.8rem;
  margin-bottom: 15px;
  text-align: center;
}
.category-content {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 20px;
}
.banner-item {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  padding: 10px;
  width: 300px;
  text-align: center;
  transition: transform 0.3s, box-shadow 0.3s;
}
.banner-item:hover {
  transform: translateY(-5px);
  box-shadow: 0 4px 8px rgba(0,0,0,0.4);
}
.banner-item img {
  width: 100%;
  border-radius: 8px;
  margin-bottom: 10px;
}
.desc {
  margin-bottom: 10px;
  font-weight: 600;
  font-size: 1.1rem;
}
.buy-now-btn {
  background: #f44336;
  border: none;
  padding: 10px 15px;
  cursor: pointer;
  border-radius: 4px;
  font-weight: 600;
  transition: background 0.3s;
  color: #fff;
}
.buy-now-btn:hover {
  background: #d32f2f;
}
.green-buy {
  background: #4caf50;
}
.green-buy:hover {
  background: #43a047;
}

/* XEM THÊM */
.view-more-container {
  text-align: center;
  margin: 20px 0;
}
.view-more-btn {
  background: #2196f3;
  color: #fff;
  padding: 10px 25px;
  border-radius: 4px;
  text-decoration: none;
  font-size: 1rem;
  transition: background 0.3s;
}
.view-more-btn:hover {
  background: #1976d2;
}

/* MODAL */
.modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.6);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1200;
}
.modal-content {
  background: #fff;
  color: #333;
  padding: 20px;
  border-radius: 8px;
  width: 320px;
  max-width: 95%;
  position: relative;
  box-shadow: 0 4px 10px rgba(0,0,0,0.3);
}
.close {
  position: absolute;
  top: 10px;
  right: 15px;
  font-size: 1.3rem;
  cursor: pointer;
}
.modal-content h2 {
  margin-bottom: 15px;
  font-size: 1.5rem;
  text-align: center;
}
.modal-content input {
  width: 100%;
  padding: 10px;
  margin-bottom: 12px;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: 1rem;
}
.modal-content button {
  width: 100%;
  padding: 10px;
  background: #2196f3;
  border: none;
  color: #fff;
  font-weight: 600;
  border-radius: 4px;
  cursor: pointer;
  transition: background 0.3s;
}
.modal-content button:hover {
  background: #1976d2;
}
.toggle-modal {
  margin-top: 10px;
  text-align: center;
}
.toggle-modal a {
  color: #2196f3;
  text-decoration: none;
  font-weight: 600;
}
.toggle-modal a:hover {
  text-decoration: underline;
}

/* LỊCH SỬ MUA HÀNG */
.order-item {
  background: rgba(255, 255, 255, 0.1);
  padding: 10px;
  border-radius: 4px;
  margin-bottom: 10px;
  font-size: 0.9rem;
}
.order-item p {
  margin-bottom: 6px;
}
.order-history-container {
  max-height: 300px; /* Chiều cao tối đa, bạn có thể thay đổi */
  overflow-y: auto;  /* Kích hoạt thanh cuộn dọc */
  margin-top: 10px;  /* Tạo khoảng cách phía trên nếu cần */
  padding-right: 5px; /* Có thể thêm chút padding để tránh đè lên thanh cuộn */
}

/* THÔNG BÁO (TOAST) */
.notification {
  position: fixed;
  top: 20px;
  right: 20px;
  background: rgba(255,255,255,0.95);
  color: #333;
  padding: 12px 20px;
  border-radius: 6px;
  box-shadow: 0 0 12px rgba(0,0,0,0.3);
  z-index: 1300;
  opacity: 0;
  transform: translateY(-20px);
  transition: opacity 0.4s, transform 0.4s;
}
.notification.fade-in {
  opacity: 1;
  transform: translateY(0);
}
.notification.fade-out {
  opacity: 0;
  transform: translateY(-20px);
}
.notification.error {
  background: rgba(255, 100, 100, 0.95);
  color: #fff;
}

/* ẨN */
.hidden {
  display: none;
}

/* LỖI */
.error-message {
  color: #ffcccb;
  font-size: 0.9rem;
  margin-top: 5px;
  text-align: center;
}



/* Footer iGuideCheat */
.footer-iguidecheat {
  position: relative;
  /* Nếu bạn có ảnh rách ở trên, thay url(...) bằng link ảnh thật */
  background: url("https://ongnhuahdpevietnam.com/wp-content/uploads/2022/08/hinh-nen-den-cho-dien-thoai.jpg") no-repeat top center,
              #000; /* Màu nền đen kết hợp ảnh rách */
  background-size: cover; /* Ảnh phủ toàn chiều rộng */
  padding: 60px 20px 40px 20px; /* Trên 60px để có chỗ cho ảnh rách */
  text-align: center;
}

/* Tiêu đề, mô tả */
.footer-title {
  font-size: 2rem;
  margin-bottom: 15px;
  font-weight: 700;
  text-transform: uppercase;
  color: #ffcc00; /* Vàng */
}

.footer-desc {
  max-width: 800px;
  margin: 0 auto 40px auto;
  line-height: 1.6;
  font-size: 1rem;
  color: #ddd; /* Chữ xám nhạt */
}

/* Tiêu đề phụ */
.footer-subtitle {
  font-size: 1.3rem;
  margin-bottom: 15px;
  font-weight: 600;
  text-transform: uppercase;
  color: #ffcc00; /* Vàng */
}

/* Nút Telegram */
.footer-buttons {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-bottom: 40px;
}

.btn-telegram-blue,
.btn-telegram-green {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 12px 20px;
  font-size: 1rem;
  font-weight: 600;
  border-radius: 6px;
  text-decoration: none;
  color: #fff;
  transition: background 0.3s;
}

.btn-telegram-blue {
  background: #0088cc; /* Xanh dương Telegram */
}

.btn-telegram-blue:hover {
  background: #006699;
}

.btn-telegram-green {
  background: #00b894; /* Xanh lá */
}

.btn-telegram-green:hover {
  background: #009374;
}

/* Điều khoản */
.footer-terms {
  font-size: 1rem;
  margin-bottom: 0; /* Hoặc tuỳ chỉnh */
  color: #ddd;
}


/* Container */
.option-container {
  max-width: 400px;
  margin: 40px auto;
  background: #fff;
  padding: 20px;
  border-radius: 8px;
  text-align: center;
}

/* Tiêu đề */
.option-container h2 {
  font-size: 1.5rem;
  margin-bottom: 20px;
  text-transform: uppercase;
}

/* Khung chọn gói */
.select-box {
  position: relative;
  display: inline-block;
  width: 200px;
  margin-bottom: 15px;
}

/* Style cho select */
.select-box select {
  width: 100%;
  padding: 5px;
  font-size: 1rem;
  border: 1px solid #ccc;
  border-radius: 6px;
  appearance: none; /* Ẩn mũi tên mặc định trên một số trình duyệt */
  background: #fff;
  cursor: pointer;
}

/* Mũi tên tùy chỉnh (nếu muốn) */
.select-box::after {
  content: "▼";
  position: absolute;
  top: 50%;
  right: 15px;
  transform: translateY(-50%);
  pointer-events: none;
  font-size: 0.8rem;
  color: #999;
}

/* Hiển thị gói đã chọn */
.chosen-package {
  margin-top: 10px;
  font-size: 1rem;
  font-weight: 500;
}
.separator-yellow {
  width: 100%;
  height: 3px;
  background-color: #ffd700; /* Màu vàng */
  margin: 10px 0;
}
.bold-green {
  color: #228B22;
  font-size: 20px;
  font-weight: bold;
}
.container-mom {
  background: rgba(255, 255, 255, 0.1); /* Nền trắng với opacity 10% */
  backdrop-filter: blur(12px);          /* Hiệu ứng làm mờ 12px */
  -webkit-backdrop-filter: blur(12px);  /* Hỗ trợ cho Safari */
  border-radius: 8px;
  padding: 20px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05); /* Shadow nhẹ */
}

//




    .profile-card {
      background-color: #333;
      color: #fff;
      padding: 20px 25px;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
      width: 350px;
      transform: translateY(20px);
      opacity: 0;
      animation: slideUp 0.6s forwards ease 0.2s;
    }
    @keyframes slideUp {
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    .profile-card h2 {
      text-align: center;
      margin-bottom: 15px;
    }
    .form-group {
      margin-bottom: 15px;
    }
    .form-group label {
      display: block;
      font-size: 0.9rem;
      margin-bottom: 5px;
      color: #bbb;
    }
    .profile-card input {
      width: 100%;
      padding: 10px;
      border: none;
      border-radius: 5px;
      outline: none;
      font-size: 0.95rem;
      color: #333;
    }
    .profile-card input:focus {
      box-shadow: 0 0 5px #5563DE;
    }
    .btn-submit {
      background: #5563DE;
      color: #fff;
      border: none;
      padding: 12px;
      border-radius: 5px;
      width: 100%;
      font-size: 1rem;
      cursor: pointer;
      transition: background 0.3s ease;
      margin-top: 5px;
    }
    .btn-submit:hover {
      background: #3c4aa5;
    }
    .note {
      font-size: 0.85rem;
      color: #ccc;
      margin-top: 5px;
    }

    /* Thông báo nổi (toast) */
    #notification {
      position: fixed;
      top: 10px; right: 10px;
      background: #4caf50;
      color: #fff;
      padding: 10px 15px;
      border-radius: 5px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      z-index: 9999;
      opacity: 0;
      pointer-events: none;
      transform: translateY(-20px);
      transition: opacity 0.5s, transform 0.5s;
    }
    #notification.error {
      background: #f44336;
    }
    #notification.show {
      opacity: 1;
      pointer-events: auto;
      transform: translateY(0);
    }
  
</style>
</head>
<body>
<!-- Thông báo (toast) -->
  <div id="notification"></div>
  <!-- HEADER -->
  <header class="header">
    <!-- Hamburger Menu (3 gạch) -->
    <div class="hamburger" id="hamburgerBtn">
      <div class="bar"></div>
      <div class="bar"></div>
      <div class="bar"></div>
    </div>
    <div class="logo">
      <img src="https://i.imgur.com/9ZPofGn.jpeg" alt="DVG Logo" />
      <span class="site-title"></span>
    </div>
    <!-- User Menu -->
    <div class="user-menu">
      <button id="btnShowLogin" class="btn-auth">Đăng Nhập</button>
      <button id="btnShowRegister" class="btn-auth">Đăng Ký</button>
      <div id="loggedInMenu" class="logged-in-menu hidden">
<i class="fa fa-user"></i>
        <span id="displayName">Username</span>
        <span class="balance-label">Số Dư: <strong id="userBalance">0</strong>đ</span>
       
        <img id="arrowIcon" src="https://cdn-icons-png.flaticon.com/512/892/892498.png" alt="Arrow" class="arrow-icon"/>
        <div id="dropdownMenu" class="dropdown-menu hidden">
          <a href="info.html">Thông Tin Tài Khoản</a>
          <hr/>
          <a href="#" id="btnLogout">Đăng Xuất</a>
        </div>
      </div>
    </div>
  </header>

  <!-- SIDEBAR (Menu 3 gạch) -->
<div id="sidebar" class="sidebar">
  <div class="sidebar-header">
    <button id="btnCloseSidebar" class="btn-close-sidebar">&times;</button>
  </div>
  <ul>
    <li><button id="btnNapBank" class="sidebar-btn">Nạp Bank</button></li>
    <li><button id="btnNapTheCao" class="sidebar-btn">Nạp Thẻ Cào</button></li>
    <li><button id="btnOrderHistory" class="sidebar-btn">Lịch sử mua hàng</button></li>
  </ul>
</div>

  <!-- Banner Chào Mừng -->
  <div class="welcome-banner">
<div class="container-mom">
   <span style="color: #FF0000; font-size: 15px; font-weight: bold;">TRÙM BÁN ĐỒ CHƠI AIMBOT - GHIM ĐẦU ANTIBAND UY TÍN SỐ 1VN</span>
    <p>Nhóm Hỗ Trợ: <a href="https://t.me/huanhasuport">Nhấn Vào Đây</a></p>
    <p>Nạp Tiền: Thẻ Cào - Bank ATM</p>
</div>
  </div>

  <!-- Danh Mục Sản Phẩm -->
  <section class="category-section">
    <h2>THÔNG TIN TÀI KHOẢN  </h2>
<div class="separator-yellow"></div>

  <!-- Thẻ hiển thị thông tin người dùng -->
  <div class="profile-card" id="profileCard">
    

    <div class="form-group">
      <label for="username">Tài khoản:</label>
      <input type="text" id="username" placeholder="VD: havanhuan113" />
    </div>

    <div class="form-group">
      <label for="email">Email:</label>
      <input type="text" id="email" placeholder="VD: hafhuan@gmail.com" disabled />
    </div>

    <div class="form-group">
      <label for="ipAddress">IP:</label>
      <input type="text" id="ipAddress" placeholder="VD: 115.73.xxx.xxx" disabled />
    </div>

    <div class="form-group">
      <label for="joinDate">Ngày tham gia:</label>
      <input type="text" id="joinDate" placeholder="VD: 2025-02-12 14:09:30" disabled />
    </div>

    <div class="form-group">
      <label for="expireDate">Hạn dùng gói:</label>
      <input type="text" id="expireDate" placeholder="VD: 2025-02-12 14:09:30" />
    </div>

    <div class="form-group">
      <label for="balance">Số dư:</label>
      <input type="text" id="balance" placeholder="VD: 6.000" />
    </div>

    <div class="form-group">
      <label for="totalDeposit">Tổng nạp:</label>
      <input type="text" id="totalDeposit" placeholder="VD: 27.000" />
    </div>

    <div class="form-group">
      <label for="newPassword">Mật khẩu mới:</label>
      <input type="password" id="newPassword" placeholder="Để trống nếu không muốn thay đổi" />
      <p class="note">Nếu nhập, hệ thống sẽ tự động đổi mật khẩu</p>
    </div>

    <button class="btn-submit" id="saveBtn">Lưu thông tin</button>
  </div>
  </section>

  <!-- Nút Xem Thêm (chuyển sang trang xemthem.html) -->
 

  <!-- Modal Đăng Nhập -->
  <div id="loginModal" class="modal hidden">
    <div class="modal-content">
      <span class="close" id="closeLoginModal">&times;</span>
      <h2>Đăng Nhập</h2>
      <input type="email" id="loginEmail" placeholder="Địa chỉ email" />
      <input type="password" id="loginPassword" placeholder="Mật khẩu" />
      <button id="btnLoginSubmit">Đăng Nhập</button>
      <p class="toggle-modal">Chưa có tài khoản? <a href="#" id="toRegisterModal">Đăng Ký</a></p>
      <div id="loginError" class="error-message"></div>
    </div>
  </div>

  <!-- Modal Đăng Ký -->
  <div id="registerModal" class="modal hidden">
    <div class="modal-content">
      <span class="close" id="closeRegisterModal">&times;</span>
      <h2>Đăng Ký</h2>
      <input type="email" id="registerEmail" placeholder="Địa chỉ email" />
      <input type="text" id="registerUsername" placeholder="Tên hiển thị" />
      <input type="password" id="registerPassword" placeholder="Mật khẩu" />
      <button id="btnRegisterSubmit">Tạo Tài Khoản</button>
      <p class="toggle-modal">Đã có tài khoản? <a href="#" id="toLoginModal">Đăng Nhập</a></p>
      <div id="registerError" class="error-message"></div>
    </div>
  </div>

  <!-- Modal Nạp Bank -->
<div id="napBankModal" class="modal hidden">
  <div class="modal-content">
    <span class="close" id="closeNapBankModal">&times;</span>
    <div class="modal-header">
      <!-- Logo ngân hàng, thay đổi src theo logo của bạn -->
      <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/25/Logo_MB_new.png/1200px-Logo_MB_new.png" alt="MBBank Logo" class="bank-logo">
     
    </div>
    <div class="bank-info">
      <div class="info-item">
        <label>Ngân hàng:</label>
        <span class="readonly-text">MBBank</span>
      </div>
      <div class="info-item">
        <label>Số tài khoản:</label>
        <span class="readonly-text">0325575642</span>
      </div>
      <div class="info-item">
        <label>Chủ TK:</label>
        <span class="readonly-text">HA VAN HUAN</span>
      </div>
    </div>
    <hr>
    <div class="input-group">
      <input type="number" id="bankAmount" placeholder="VD: 100,000 VNĐ">
    </div>
    <div class="transfer-note">
      <p>Nội dung chuyển khoản: <span id="bankNote"></span></p>
    </div>
    <button id="btnSubmitBank" class="submit-btn">Xác Nhận Đã Chuyển</button>
    <p class="info-note">(Sau khi Admin kiểm tra giao dịch, số dư sẽ được cộng)</p>
  </div>
</div>

<!-- Modal Nạp Thẻ Cào -->
<div id="napTheModal" class="modal hidden">
  <div class="modal-content">
    <span class="close" id="closeNapTheModal">&times;</span>
    <div class="modal-header">
      <!-- Icon từ Font Awesome -->
      <i class="fas fa-credit-card modal-icon"></i>
    </div>
    <div class="card-info">
      <div class="input-group">
        <input type="number" id="cardAmount" placeholder="Số tiền muốn nạp (VNĐ)">
      </div>
      <div class="input-group">
        <input type="text" id="cardType" placeholder="Loại thẻ (Viettel, Vina...)">
      </div>
      <div class="input-group">
        <input type="text" id="cardSerial" placeholder="Mã seri">
      </div>
      <div class="input-group">
        <input type="text" id="cardCode" placeholder="Mã thẻ">
      </div>
    </div>
    <button id="btnSubmitCard" class="submit-btn">Xác Nhận</button>
    <p class="info-note">(Sau khi Admin duyệt, số dư sẽ được cộng)</p>
  </div>
</div>

 <!-- Modal Lịch sử mua hàng -->
<div id="orderHistoryModal" class="modal hidden">
  <div class="modal-content order-modal-content">
    <span class="close" id="closeOrderHistoryModal">&times;</span>
    <div class="order-modal-header">
      <div class="animated-icon">
        <i class="fas fa-exclamation"></i>
      </div>
      <h2><i class="fas fa-history"></i> Lịch sử mua hàng</h2>
    </div>
    <!-- Container chứa danh sách đơn hàng -->
    <div id="orderHistoryContainer" class="order-history-container">
      <div id="orderHistoryContent" class="order-history-content">
        <!-- Mẫu một đơn hàng -->
        <div class="order-item">
          <div class="order-icon">
            <i class="fas fa-shopping-cart"></i>
          </div>
          <div class="order-details">
            <p class="order-date">12/03/2025</p>
            <p class="order-info">Đơn hàng #12345 - Thành công</p>
          </div>
        </div>
        <!-- Bạn có thể thêm nhiều đơn hàng khác -->
      </div>
    </div>
  </div>
</div>
<!-- Footer liên hệ -->
<!-- Phần kết trang -->
<!-- Phần kết trang -->
  <section class="footer-iguidecheat">
    <!-- Tiêu đề giới thiệu -->
    <h2 class="footer-title">GIỚI THIỆU TRUMAIMBOT</h2>
    <p class="footer-desc">
      Trumaimbot.online là nền tảng hàng đầu cung cấp các công cụ và mod trò chơi,
      giúp bạn trải nghiệm những game một cách dễ dàng và an toàn. Chúng tôi
      hiểu rằng mỗi người có một cách chơi khác nhau, vì vậy chúng tôi luôn
      tập trung vào việc đem lại sự hỗ trợ tốt nhất. Hãy truy cập thường xuyên
      để cập nhật những bản hack và mod an toàn, giúp bạn tối ưu trải nghiệm
      với mức độ an toàn cao nhất.
    </p>
    
    <!-- Kết nối với chúng tôi -->
    <h3 class="footer-subtitle">KẾT NỐI VỚI CHÚNG TÔI</h3>
    <div class="footer-buttons">
      <!-- Nút channel telegram -->
      <a href="https://t.me/suporthuanhavn" class="btn-telegram-blue">
        <i class="fa-brands fa-telegram"></i>
        Channel Telegram
      </a>
      <!-- Nút group chat telegram -->
      <a href="https://t.me/huanhasuport" class="btn-telegram-green">
        <i class="fa-brands fa-telegram"></i>
        Group Chat Telegram
      </a>
    </div>
    
    <!-- Điều khoản -->
    <h3 class="footer-subtitle">ĐIỀU KHOẢN</h3>
    <p class="footer-terms">Điều khoản sử dụng</p>
$ Vui Lòng Chấp Hành Các Quy Định Của Website Của Chúng Tôi
  </section>

  <!-- Toast Notification -->
  <div id="notification" class="notification hidden"></div>

  <script>
    // Hàm hiển thị thông báo (toast)
    function showNotification(message, isError = false) {
      const notification = document.getElementById('notification');
      notification.textContent = message;
      notification.classList.remove('error', 'show');
      if (isError) {
        notification.classList.add('error');
      }
      // Kích hoạt hiệu ứng show
      requestAnimationFrame(() => {
        notification.classList.add('show');
      });
      // Ẩn sau 3 giây
      setTimeout(() => {
        notification.classList.remove('show');
      }, 3000);
    }

    // Khởi tạo Firebase (từ file firebase-config.js)
    // => Giả sử file firebase-config.js đã gọi: firebase.initializeApp({...})

    // Lắng nghe trạng thái đăng nhập
    firebase.auth().onAuthStateChanged(async (user) => {
      if (!user) {
        showNotification("Bạn chưa đăng nhập!", true);
        return;
      }
      try {
        // 1. Lấy email, ngày tạo tài khoản
        const email = user.email || "";
        const creationTime = user.metadata.creationTime || "";
        // 2. Lấy thông tin từ Realtime Database
        const userRef = firebase.database().ref("users/" + user.uid);
        const snapshot = await userRef.once("value");
        const userData = snapshot.val() || {};

        // Giả sử trong userData có:
        // {
        //   username: "havanhuan113",
        //   ip: "115.73.200.122",
        //   expireDate: "2025-02-12 14:09:30",
        //   balance: 6000,
        //   totalDeposit: 27000
        // }
        // Nếu chưa có IP trong DB, ta thử gọi API ipify (có thể tuỳ chọn)
        let userIP = userData.ip || "";
        if (!userIP) {
          // Lấy IP tạm thời
          const res = await fetch("https://api.ipify.org?format=json");
          const ipData = await res.json();
          userIP = ipData.ip;
        }

        // Điền dữ liệu vào form
        document.getElementById("username").value = userData.username || user.displayName || "";
        document.getElementById("email").value = email;
        document.getElementById("ipAddress").value = userIP;
        document.getElementById("joinDate").value = creationTime;
        document.getElementById("expireDate").value = userData.expireDate || "";
        document.getElementById("balance").value = userData.balance || 0;
        document.getElementById("totalDeposit").value = userData.totalDeposit || 0;
      } catch (err) {
        console.error(err);
        showNotification("Lỗi khi lấy thông tin người dùng!", true);
      }
    });

    // Xử lý nút "Lưu thông tin"
    document.getElementById("saveBtn").addEventListener("click", async () => {
      const user = firebase.auth().currentUser;
      if (!user) {
        showNotification("Bạn chưa đăng nhập!", true);
        return;
      }
      try {
        // Thu thập thông tin từ form
        const username = document.getElementById("username").value.trim();
        const ip = document.getElementById("ipAddress").value.trim(); // Có thể disable nếu ko cho sửa
        const expireDate = document.getElementById("expireDate").value.trim();
        const balance = parseFloat(document.getElementById("balance").value) || 0;
        const totalDeposit = parseFloat(document.getElementById("totalDeposit").value) || 0;
        const newPassword = document.getElementById("newPassword").value.trim();

        // 1. Cập nhật lên Realtime Database
        const userRef = firebase.database().ref("users/" + user.uid);
        await userRef.update({
          username: username,
          ip: ip,
          expireDate: expireDate,
          balance: balance,
          totalDeposit: totalDeposit
        });

        // 2. Cập nhật displayName trên Firebase Auth (nếu cần)
        if (username) {
          await user.updateProfile({ displayName: username });
        }

        // 3. Nếu có newPassword => đổi mật khẩu
        if (newPassword) {
          await user.updatePassword(newPassword);
          showNotification("Cập nhật thông tin & đổi mật khẩu thành công!");
        } else {
          showNotification("Cập nhật thông tin thành công!");
        }

        // Xoá password sau khi đổi
        document.getElementById("newPassword").value = "";
      } catch (err) {
        console.error(err);
        showNotification("Lỗi khi cập nhật thông tin!", true);
      }
    });
  </script>
<script>
// Ví dụ mở sidebar khi nhấn nút hamburger (nếu có):
document.getElementById('hamburgerBtn').addEventListener('click', function() {
  document.getElementById('sidebar').classList.add('active');
});
</script>
</body>
</html>